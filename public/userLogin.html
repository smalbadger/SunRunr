<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SunRunr - Sign in</title>

	 <!-- Import jQuery -->
	 <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	 <!-- Import Google Icon Font -->
	 <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	 <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <link href="stylesheets/sunrunr.css" rel="stylesheet">
    <script src="javascripts/signin.js"></script>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!--<meta name="google-signin-client_id" content="646617972867-oh2rbgpqn26uhgr1mrb37mebo6infork.apps.googleusercontent.com">-->
  </head>

  <body class="blue-grey lighten-2">
    <nav>
      <div id="nav" class="nav-wrapper blue-grey darken-2">
      	<a href="account.html" class="brand-logo left">
        <img id="logo" src="images/logo.png">
        <span id="name">SunRunr</span></a>
      </div>
    </nav>

    <div class="row">
      <div class="col s0 m3"></div>
      <div class="col s12 m6">
        <div class="card blue-grey center-align hoverable">
          <div class="card-content white-text">
            <span class="card-title">Sign in</span>
            <div class="input-field">
              <label for="email">Email</label>
              <input type="email" id="email" name="email" >
            </div>
            <div class="input-field">
              <label for="password">Password</label>
              <input type="password" id="password" name="password">
            </div>
            <div class="card-action">
              <div><button id="signin" class="waves-effect waves-light btn">Sign in</button></div>
              <div id="account">Need an account? <a href="userRegistration.html">Register</a></div>
            </div>
          </div>
          <div class="card-panel blue-text" id="ServerResponse" style="display: none"></div>
        </div>


        <div class="card blue-grey center-align hoverable">
          <div class="card-content white-text">
            <span class="card-title">Or Sign-in With Google</span>
            <div class="g-signin2" data-onsuccess="onSignIn"></div>
          </div>
        </div>

      </div>
  </body>

  <!-- Google signin -->
  <script src="https://apis.google.com/js/platform.js" async defer></script>

  <script>
    function onSignIn(googleUser) {
      var profile = googleUser.getBasicProfile();
      var id = profile.getId()
      var name = profile.getName()
      var email = profile.getEmail()

      console.log("ID: " + id)
      console.log("Name: " + name)
      console.log("Email: " + email)

      signInWithGoogle(email, name, id);
    }

    function signOut() {
      var auth2 = gapi.auth2.getAuthInstance();
      auth2.signOut().then(function () {
        window.location = "userLogin.html"
      });
    }

    function onLoad(){
      gapi.load('auth2', function(){gapi.auth2.init()})
      $('.signout').click(signOut);
    }
  </script>

</html>
